(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{45:function(e,t,r){},55:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(1),c=r.n(a),s=r(38),l=r.n(s),i=(r(45),r(26)),o=(r(46),r(56),r(57),i.a.initializeApp({apiKey:"AIzaSyBFDhcL9mom7ahJSJZHEzWqIRb2QcTq130",authDomain:"nwitter-e1483.firebaseapp.com",projectId:"nwitter-e1483",storageBucket:"nwitter-e1483.appspot.com",messagingSenderId:"591685981747",appId:"1:591685981747:web:3ea2d8f37d89c9da3b7546"}),i.a.auth()),u=i.a,d=i.a.firestore(),b=i.a.storage(),x=r(7),j=r(30),f=r(10),m=r(4),h=r.n(m),p=r(8),v=r(28),O=r(20),g=r(25),w=function(){var e=Object(g.a)({mode:"onBlur"}),t=e.register,r=(e.formState,e.handleSubmit),c=e.getValues,s=e.errors,l=Object(a.useState)(!1),i=Object(x.a)(l,2),d=i[0],b=i[1],j=Object(a.useState)(null),f=Object(x.a)(j,2),m=f[0],w=f[1],y=function(){var e=Object(p.a)(h.a.mark((function e(){var t,r,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c(),r=t.email,n=t.password,a=t.password2,e.prev=1,!d){e.next=12;break}if(n!==a){e.next=9;break}return e.next=6,o.createUserWithEmailAndPassword(r,n);case 6:e.sent,e.next=10;break;case 9:w("Please verify your password");case 10:e.next=15;break;case 12:return e.next=14,o.signInWithEmailAndPassword(r,n);case 14:e.sent;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),w(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.name,e.prev=1,n=null,"google"===r?n=new u.auth.GoogleAuthProvider:"github"===r&&(n=new u.auth.GithubAuthProvider),!n){e.next=7;break}return e.next=7,o.signInWithPopup(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),w(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"w-full flex flex-col items-center",children:Object(n.jsxs)("div",{className:"w-full max-w-screen-sm flex flex-col items-center mt-32",children:[Object(n.jsx)("div",{className:"w-full h-16 text-2xl italic bg-gray-700 text-white flex items-center justify-center",children:d?"Create Account":"Log in"}),Object(n.jsxs)("form",{className:"w-full  flex flex-col py-6 px-4 border border-gray-200",method:"post",onSubmit:r(y),children:[Object(n.jsxs)("div",{className:"flex flex-col items-start w-full mb-4",children:[Object(n.jsx)("input",{className:"border border-gray-400 py-3 px-2 text-lg w-full outline-none",ref:t({required:!0,pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:"Please write valid email address"}}),type:"email",name:"email",placeholder:"Email",required:!0}),s.email&&Object(n.jsx)("span",{className:"text-red-600 italic text-sm font-thin",children:s.email.message})]}),Object(n.jsxs)("div",{className:"flex flex-col items-start w-full mb-4",children:[Object(n.jsx)("input",{className:"border border-gray-400 py-3 px-2 text-lg w-full outline-none",ref:t({required:!0,minLength:{value:8,message:"Password must be longer than 8 length."},maxLength:{value:16,message:"Password must be shorter than 16 length."}}),type:"password",name:"password",placeholder:"Password",required:!0}),s.password&&Object(n.jsx)("span",{className:"text-red-600 italic text-sm font-thin",children:s.password.message})]}),d&&Object(n.jsxs)("div",{className:"flex flex-col items-start w-full mb-4",children:[Object(n.jsx)("input",{className:"border border-gray-400 py-3 px-2 text-lg w-full outline-none",ref:t({required:!0,minLength:{value:8,message:"Password must be longer than 8 length."},maxLength:{value:16,message:"Password must be shorter than 16 length."}}),type:"password",name:"password2",placeholder:"Verify password",required:!0}),s.password2&&Object(n.jsx)("span",{className:"text-red-600 italic text-sm font-thin",children:s.password2.message})]}),m&&Object(n.jsx)("div",{className:"w-full text-red-600 mb-4",children:Object(n.jsx)("span",{children:m})}),Object(n.jsx)("button",{className:"mx-auto w-1/2 text-center text-xl py-5 bg-blue-200 text-blue-400 hover:bg-blue-600 hover:text-blue-200 transition duration-200",children:d?"Create Account":"Log in"})]}),Object(n.jsxs)("div",{className:"w-full py-4 flex justify-around",children:[Object(n.jsxs)("button",{onClick:N,name:"google",className:"py-4 text-center text-xl bg-red-600 text-white px-4 hover:bg-red-400 transition duration-200",children:[Object(n.jsx)(O.a,{className:"mr-2 border border-white rounded-full p-1 text-2xl",icon:v.b}),"Continue with Google"]}),Object(n.jsxs)("button",{onClick:N,name:"github",className:"py-4 text-center text-xl bg-gray-800 text-white px-4 hover:bg-gray-600 transition duration-200",children:[Object(n.jsx)(O.a,{icon:v.a,className:"mr-2"}),"Continue with Github"]})]}),Object(n.jsx)("div",{className:"text-xl",children:Object(n.jsxs)("p",{children:[d?"You already have account? Then, ":"Don't you have any account? Then, ",Object(n.jsx)("span",{className:" cursor-pointer text-blue-500 hover:font-bold",onClick:function(){return b(!d)},children:d?"Log in":"Create account."})]})})]})})},y=r(22),N=r(9),k=r(29),U=function(e){var t,r=e.id,c=e.creatorId,s=(e.createdAt,e.nweet),l=e.imageUrl,i=Object(g.a)(),u=i.register,j=i.getValues,f=(i.setValue,i.watch,Object(a.useState)(!1)),m=Object(x.a)(f,2),v=m[0],w=m[1],y=Object(a.useState)(s),N=Object(x.a)(y,2),U=N[0],S=N[1],C=Object(a.useState)(null),A=Object(x.a)(C,2),P=A[0],L=A[1],I=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=8;break}return e.t0=L,e.next=4,b.ref().child("".concat(c,"/").concat(l)).getDownloadURL();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=9;break;case 8:L("".concat("/nwitter","/noimage.png"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){I()}),[]);var R=function(){var e=Object(p.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this nweet?")){e.next=7;break}if(!l){e.next=5;break}return e.next=5,b.ref().child("".concat(null===(r=o.currentUser)||void 0===r?void 0:r.uid,"/").concat(l)).delete();case 5:return e.next=7,d.collection("nweets").doc(t).delete();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(),n=r.text,e.next=3,d.collection("nweets").doc(t).update({nweet:n});case 3:w(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"w-full flex flex-start items-center py-2",children:[v?Object(n.jsx)("input",{ref:u(),placeholder:"Write yours",className:"w-full p-1 border border-gray-500 outline-none",value:U,onChange:function(e){return S(e.target.value)},name:"text",type:"text"}):Object(n.jsxs)("div",{className:"flex items-center w-full border border-gray-400",children:[Object(n.jsx)("div",{className:" border-r  border-gray-400  h-28 w-32 mr-2 p-1 flex justify-center items-center",children:P?Object(n.jsx)("img",{className:"w-full h-full",src:P,alt:"".concat(s)}):Object(n.jsx)(n.Fragment,{})}),Object(n.jsx)("div",{className:"w-full",children:s})]}),Object(n.jsx)("div",{className:"w-20 flex ",children:(null===o||void 0===o||null===(t=o.currentUser)||void 0===t?void 0:t.uid)===c&&(v?Object(n.jsx)("button",{className:"ml-2 w-full p-1 text-center bg-blue-400 text-white hover:bg-blue-600 transition duration-200",onClick:function(){return T(r)},children:"Done"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{className:"mr-2 w-10",onClick:function(){return R(r)},children:Object(n.jsx)(O.a,{icon:k.b})}),Object(n.jsx)("button",{className:"w-10",onClick:function(){return S(s),void w(!0)},children:Object(n.jsx)(O.a,{icon:k.a})})]}))})]})},S=r(59),C=function(){var e=Object(g.a)(),t=e.register,r=e.handleSubmit,c=e.getValues,s=(e.errors,e.reset),l=Object(a.useState)([]),i=Object(x.a)(l,2),u=i[0],j=i[1],f=Object(a.useState)(null),m=Object(x.a)(f,2),v=m[0],O=m[1],w=function(){var e=Object(p.a)(h.a.mark((function e(){var t,r,n,a,l,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c(),n=r.message,r.files,a=null,!v){e.next=7;break}return a=Object(S.a)(),i=b.ref().child("".concat(null===(l=o.currentUser)||void 0===l?void 0:l.uid,"/").concat(a)),e.next=7,i.putString(v,"data_url");case 7:return e.next=9,d.collection("nweets").add({nweet:n,creatorId:null===(t=o.currentUser)||void 0===t?void 0:t.uid,createdAt:Date.now(),imageUrl:a});case 9:s(),O(null);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d.collection("nweets").orderBy("createdAt","asc").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var t=e.doc.data(),r=t.creatorId,n=t.nweet,a=t.createdAt,c=t.imageUrl;j((function(t){return[{id:e.doc.id,creatorId:r,nweet:n,createdAt:a,imageUrl:c}].concat(Object(N.a)(t))}))}"removed"===e.type&&j((function(t){return t.filter((function(t){return t.id!==e.doc.id}))})),"modified"===e.type&&j((function(t){var r=t.findIndex((function(t){return t.id===e.doc.id}));if(r>-1){var n=e.doc.data().nweet;t[r]=Object(y.a)(Object(y.a)({},t[r]),{},{nweet:n})}return Object(N.a)(t)}))}))}))}),[]),Object(n.jsx)("div",{className:"w-full flex flex-col max-h-screen overflow-y-scroll",children:Object(n.jsxs)("div",{className:"w-full max-w-screen-sm flex flex-col items-start mt-4 mb-4",children:[Object(n.jsx)("div",{className:"p-1 w-32 h-32 border border-gray-400 self-center mb-2 flex justify-center items-center",children:v&&Object(n.jsx)("img",{className:"w-full h-full",src:v,alt:"from user"})}),Object(n.jsxs)("form",{className:"w-full flex flex-col px-2",onSubmit:r(w),children:[Object(n.jsx)("div",{className:"flex flex-col items-start w-full mr-2 mb-2",children:Object(n.jsx)("input",{className:"border border-gray-400 py-3 px-2 text-lg w-full outline-none",ref:t(),name:"files",type:"file",accept:"image/*",onChange:function(){var e=c().files[0],t=new FileReader;t.onloadend=function(e){return O(e.currentTarget.result)},t.readAsDataURL(e)}})}),Object(n.jsxs)("div",{className:"w-full flex",children:[Object(n.jsx)("div",{className:"flex flex-col items-start w-full mr-2",children:Object(n.jsx)("input",{className:"border border-gray-400 py-3 px-2 text-lg w-full outline-none",ref:t(),name:"message",type:"text",placeholder:"What's on your mind?"})}),Object(n.jsx)("button",{className:"mx-auto text-center text-sm px-2 bg-blue-200 text-blue-400 hover:bg-blue-600 hover:text-blue-200 transition duration-200",children:"Nweet"})]})]}),Object(n.jsx)("div",{className:"mt-4 px-2 w-full",children:(null===u||void 0===u?void 0:u.length)>0?Object(n.jsx)("div",{children:u.map((function(e){return Object(n.jsx)(U,Object(y.a)({},e),e.id)}))}):Object(n.jsx)("div",{children:"No Message"})})]})})},A=function(e){var t=e.displayName,r=e.email,a=e.photoUrl;return Object(n.jsx)("nav",{className:"w-full p-4 bg-blue-400 text-white text-2xl",children:Object(n.jsxs)("ul",{className:"w-full flex justify-between",children:[Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/",children:Object(n.jsx)(O.a,{icon:v.c})})}),Object(n.jsx)("li",{children:Object(n.jsxs)(j.b,{to:"/profile",className:"flex items-center group",children:[a?Object(n.jsx)("div",{className:"w-8 h-8 rounded-full bg-cover bg-center mr-2",style:{backgroundImage:"url(".concat(a,")")}}):Object(n.jsx)(O.a,{icon:k.c,className:"mr-2"}),Object(n.jsxs)("span",{className:"text-sm group-hover:underline",children:[t,"(",r,")"]})]})})]})})},P=function(e){var t=e.setProfileText,r=e.profileText,c=Object(a.useState)(!1),s=Object(x.a)(c,2),l=s[0],i=s[1],u=Object(a.useState)(""),d=Object(x.a)(u,2),j=d[0],f=d[1],m=Object(a.useRef)(null),v=function(){var e=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j||!Boolean(j)||j===r.displayName){e.next=4;break}return t({displayName:j,email:r.email}),e.next=4,null===o||void 0===o||null===(n=o.currentUser)||void 0===n?void 0:n.updateProfile({displayName:j,photoURL:o.currentUser.photoURL});case 4:i(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"flex flex-col w-full mt-4 p-2",children:[Object(n.jsxs)("div",{className:"flex flex-col justify-center items-center w-full",children:[Object(n.jsx)("button",{className:"w-full py-3 bg-blue-400 text-white hover:bg-blue-600 transition duration-200 mb-4",onClick:function(){return o.signOut()},children:"Logout"}),Object(n.jsx)("div",{className:"border bg-cover bg-center w-32 h-32 rounded-full  border-gray-400",style:{backgroundImage:"url(".concat(r.photoUrl,")")}}),Object(n.jsx)("input",{name:"files",type:"file",accept:"image/*",className:"hidden",ref:m,onChange:function(){if(m.current&&m.current.files){var e,n=null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.files[0],a=new FileReader,c=null;a.readAsDataURL(n),a.onloadend=function(){var e=Object(p.a)(h.a.mark((function e(n){var a,s,l,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof(c=null===(a=n.target)||void 0===a?void 0:a.result)){e.next=11;break}if(!c){e.next=11;break}return e.next=5,b.ref().child("".concat(null===(s=o.currentUser)||void 0===s?void 0:s.uid,"/profile")).putString(c,"data_url");case 5:return i=e.sent,e.next=8,i.ref.getDownloadURL();case 8:u=e.sent,null===(l=o.currentUser)||void 0===l||l.updateProfile({photoURL:u}),t(Object(y.a)(Object(y.a)({},r),{},{photoUrl:u}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}),Object(n.jsx)("button",{onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.click()},className:"mt-2 bg-blue-400 text-white hover:bg-blue-600 px-2 py-3 transition duration-200",children:"Change Photo"})]}),Object(n.jsxs)("div",{className:"border mt-10 flex flex-col p-4 relative items-center",children:[Object(n.jsx)("div",{className:"absolute -top-4 py-2 px-2 bg-indigo-400 text-white rounded-lg",children:"Profile"}),Object(n.jsxs)("div",{className:"w-full flex flex-col items-start justify-start mt-4",children:[Object(n.jsx)("div",{className:"w-full flex items-center py-3",children:l?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"text",className:"w-full p-2 outline-none border border-gray-200 mr-3",name:"inputName",value:j,onChange:function(e){return f(e.target.value)}}),Object(n.jsx)("button",{onClick:v,className:"bg-blue-400 text-white hover:bg-blue-600 px-2 py-2",children:"Done"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{className:"w-full",children:["Display Name: ",r.displayName]}),Object(n.jsx)("button",{onClick:function(){i(!0),r&&r.displayName&&f(null===r||void 0===r?void 0:r.displayName)},className:"bg-blue-400 text-white hover:bg-blue-600 px-2 py-2",children:"Change"})]})}),Object(n.jsx)("div",{className:"w-full flex items-center py-3",children:Object(n.jsxs)("span",{children:["Email: ",r.email]})})]})]})]})},L=function(e){var t=e.isLoggedIn,r=e.profileText,a=e.setProfileText;return Object(n.jsxs)(j.a,{children:[t&&Object(n.jsx)(A,{displayName:r.displayName,email:r.email,photoUrl:r.photoUrl}),t?Object(n.jsxs)(f.d,{children:[Object(n.jsx)(f.b,{exact:!0,path:"/",children:Object(n.jsx)(C,{})}),Object(n.jsx)(f.b,{exact:!0,path:"/profile",children:Object(n.jsx)(P,{setProfileText:a,profileText:r})}),Object(n.jsx)(f.a,{from:"*",to:"/"})]}):Object(n.jsx)(f.d,{children:Object(n.jsx)(f.b,{exact:!0,"path-":"/",children:Object(n.jsx)(w,{})})})]})};var I=function(){var e,t,r=Object(a.useState)(o.currentUser),c=Object(x.a)(r,2),s=c[0],l=c[1],i=Object(a.useState)({displayName:null===(e=o.currentUser)||void 0===e?void 0:e.displayName,email:null===(t=o.currentUser)||void 0===t?void 0:t.email}),u=Object(x.a)(i,2),d=u[0],b=u[1];return Object(a.useEffect)((function(){o.onAuthStateChanged((function(e){l(e),b({displayName:null===e||void 0===e?void 0:e.displayName,email:null===e||void 0===e?void 0:e.email,photoUrl:null===e||void 0===e?void 0:e.photoURL})}))}),[]),Object(n.jsx)("div",{className:"w-screen flex justify-center",children:Object(n.jsx)("div",{className:"w-full min-w-min max-w-screen-sm border border-gray-400",children:Object(n.jsx)(L,{profileText:d,setProfileText:b,isLoggedIn:Boolean(s)})})})};l.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.bde7d25f.chunk.js.map